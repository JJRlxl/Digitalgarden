---
{"url":"https://mp.weixin.qq.com/s/UIlz3uu_KtTvaDGxznEzwg","title":"三平面投影的错误及其改进！完美版【附：工程文件】","date":"2024-02-26 09:15:54","tags":null,"banner":"https://mmbiz.qpic.cn/mmbiz_jpg/8VPvxBhD4vC5MQia50l1dPdplqX4YD8VLvV0NSYjic0SBuaHX9icg8Zfw7YicFU0saiag5Kcsalpx4RCTFn7FoWFt2A/0?wx_fmt=jpeg","banner_icon":"🔖","dg-publish":true,"permalink":"/杂/output/7-三平面投影的错误及其改进！完美版【附：工程文件】/7-三平面投影的错误及其改进！完美版【附：工程文件】/","dgPassFrontmatter":true}
---


> [!NOTE] [[杂/杂目录\|回到杂项目录]]



三维平面映射是在着色器领域中一种流行的方法，但在游戏中的实现并不总是正确的。首先我们解释了这种方法的基本实现，然后分析并修复了错误

但由于该位置是三维数据，而 UVS 只有二维数据，我们发现自己必须根据我们的选择选择留下三个位置通道中的哪一个，我们将获得三个不同的结果，所有结果都属于规划器投影的宏观类别  

![](<assets/1708910155182.png>)

同时使用所有三个平面映射相同的纹理，这意味着必须找到一种方法来计算哪个平面应显示在表面的哪个部分，正如我们所见，表面越朝向平面相位，选择显示该平面就越有意义，否则我们将得到一个极度扭曲的图像我们可以通过从表面法线开始操作

![](<assets/1708910155258.png>)

以往三平面映射方案问题：  

**01**- 如果我们改变纹理，侧面映射是上下颠倒的，而且它们的一侧还是水平镜像的。沿着 c 轴投影的底部部分也出现了同样的问题。虽然这可能被认为不是一个问题，因为不是所有的纹理在这样的变换下都看起来明显错误，但如果你想制作一个通用的着色器，这个问题必须得到解决  

![](<assets/1708910155285.png>)

**02**- 让我们添加法线贴图，让我们看看，是的，它已经完全损坏了，这个问题要困难得多

![](<assets/1708910155326.png>)

需要注意的是其中比较重要的是我们需要 ---> 选择主材质 ---> 禁用材质的切线空间法线，创建我们自己的向量变换，并正确转化为空间向量

![](<assets/1708910155376.png>)

![](<assets/1708910155436.png>)

**03**- 现在剩下的唯一一件事就是解决 uv

![](<assets/1708910155466.png>)

来解决这个问题，我们必须将这些导数手动传递给采样器并使用连续数据计算它们

![](<assets/1708910155496.png>)

**04**- 改进用于地形和模块化对象的三维平面映射  

地形上的拉伸问题

![](<assets/1708910155559.png>)

减少投影倾斜角度，使他们更加水平。提高覆盖范围减少纹理拉伸  

![](<assets/1708910155626.png>)

我们强制规定投影角度  

![](<assets/1708910155678.png>)

![](<assets/1708910155762.png>)

![](<assets/1708910155857.png>)

作者：Visual Tech Art  
地址：https://youtu.be/Cq5H59G-DHI  
原视频

[视频详情](javascript:;)

01:26 平面投影和法线

• 三维平面映射同时在三个平面上映射相同的纹理，使用顶点位置数据

• 法线用于确定表面的方向和选择要进行映射的平面

04:59 错误修正和法线修复

• 作者使用 UV 射线和法线贴图修复了纹理映射和法线中的错误

• 结果是正确显示纹理和法线

10:12 提高性能和消除不均匀性

• 作者提出了一种替代方法，可以一次在沿所有三个投影显示纹理

• 这有助于避免内存问题和不均匀的紫外线分布

12:19 改进三维平面映射

• 视频讨论了如何改进用于地形和模块化对象的三维平面映射

• 讨论了仅使用水平投影和纹理拉伸的问题

16:37 解决法线问题

• 讨论了由于具有零长度的法线引起的错误

• 提出了一种解决方案，用于检查向量长度并在必要时沿 y 轴重写

19:47 改善覆盖和降低纹理失真

• 讨论了使用五个平面映射的可能性，以改善平面的覆盖

• 建议使用 45 度旋转以改善覆盖和减小纹理失真

20:41 创建安娜平面图

• 讨论了创建安娜平面图的过程，该图由四个侧面投影组成，这些投影旋转了 45 度

• 建议使用交叉蒙版来控制分裂向量，并更新基础以进行矩阵乘法

23:49 更新矩阵变换

• 视频作者承认他原本对自己的想法持怀疑态度，但现在看到它确实有效。

• 他在第二个版本的单次提取中更新了矩阵变换，并完成了过程

24:07 结果与展望

• 最终结果绝对值得额外的工作，作者看到纹理更自然地适应地形，并获得了少量自由纹理重复

**获工程文件发消息**：平面投影  

![](<assets/1708910155942.png>)
